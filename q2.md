# 演習2

gitの基本的な操作である`clone`から`push`, ブランチの操作を練習します。

## 演習リポジトリのFork

Githubの演習リポジトリ [sinsoku/git-training](https://github.com/sinsoku/git-training) をForkします。

### Fork について

他のユーザのgitリポジトリには基本的に書き込み権限がないため、変更履歴をpushできない。

![](https://raw.github.com/sinsoku/git-training/master/img/fork_1.png)

そのため、他のユーザのgitリポジトリをForkし、自分のアカウントでも書き込みできるリポジトリを作成する。

![](https://raw.github.com/sinsoku/git-training/master/img/fork_2.png)

もちろん、Forkしたリポジトリは元リポジトリの作者でも書き込み権限はありません。

![](https://raw.github.com/sinsoku/git-training/master/img/fork_3.png)

### Pull Request について

Forkしたリポジトリの変更履歴を元リポジトリの作者にフィードバックする時に使用する。

![](https://raw.github.com/sinsoku/git-training/master/img/pullreq_1.png)

## 演習リポジトリのファイル説明

使用するファイルは`cmds/`のディレクトリの中身だけです。

* command_list - コマンド一覧
* version      - gitのバージョン情報
* 各コマンド   - `git-help`で表示された一般コマンドの英語ヘルプ

## cloneしてみる

Forkがうまく出来れば、自分のGithubのリポジトリに`git-training`リポジトリが出来ているはずです。

```bash
$ git clone <repository url>
```

### 状態を確認しましょう

```bash
$ git status
TODO
```

### ログを確認しましょう

```bash
$ git log --oneline --decorate --graph
TODO
```

## 最初のコミット

command_list.txt を更新してみましょう。

```bash
$ vim cmds/command_list.txt
(ファイルの更新)
$ git status
TODO
```

### 変更箇所の差分を表示しましょう

```bash
$ git diff
TODO
```

### ファイルをインデックスに追加する

```bash
$ git add cmds/command_list.txt
$ git status
TODO
```

### インデックスの差分を表示する

```bash
$ git diff --cached
```

### コミットする

```bash
$ git commit -m"update help"
$ git log --oneline --decorate --graph
TODO
```

## プッシュしましょう

```bash
$ git push origin master
$ git log --oneline --decorate --graph
TODO
```

## 課題: diffの行も和訳し、プッシュしてみましょう。

commitの行と同様に、diffの行を変更し、pushします。

## ブランチを作りましょう

git_branch.txt を和訳するためのブランチを作成してみましょう。

### ブランチを作り、チェックアウトする。

```bash
$ git branch
* master
$ git branch branch-ja
$ git log --oneline --decorate --graph
TODO
$ git checkout branch-ja
$ git branch
* branch-ja
  master
```

### git_branch.txt を更新しましょう

```bash
$ vim cmds/git_branch.txt
(DESCRIPTIONの1行目の更新)
$ git add cmds/git_branch.txt
$ git commit -m"update DESCRIPTION"
```

```bash
$ vim cmds/git_branch.txt
(DESCRIPTIONの2行目の更新)
$ git add cmds/git_branch.txt
$ git commit -m"update DESCRIPTION"
```

```bash
$ git log --oneline --decorate --graph
TODO
```

### fast-forward とは？


### マージしてみましょう

```bash
$ git checkout master
$ git merge branch-ja
TODO
$ git log --oneline --decorate --graph
```

## 過去の変更を元に戻してみましょう

先ほど変更したdiffの行を元に戻してみましょう。

```bash
$ git log --oneline --decorate --graph
TODO
$ git revert <sha-1>
$ git status
TODO
$ git commit
```

* 過去の状態に戻す

- git-branch で過去の状態のブランチを作って、checkoutする

## コンフリクトを体験してみましょう

演習用に用意した *コンフリクトが起きる状態のブランチ* をマージしてみましょう。

### ブランチの確認

```bash
$ git log --oneline --decorate --graph --all
TODO
```

### コンフリクト！！

```bash
$ git merge conflict_branch_ja
TODO
$ git status
```

- merge --abort の話


## タグを打ってみましょう

```bash
$ git tag v1.0.0 <sha-1>
```

タグもブランチと同様にpushできます。

```bash
$ git push origin v1.0.0
```
